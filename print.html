<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Foundry Template</title>
        <meta name="robots" content="noindex" />


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="book.css">

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item "><a href="index.html">Home</a></li><li class="chapter-item affix "><li class="part-title">src</li><li class="chapter-item "><a href="src/dependencies/index.html">❱ dependencies</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="src/dependencies/JsmnSolLib.sol/library.JsmnSolLib.html">JsmnSolLib</a></li></ol></li><li class="chapter-item "><a href="src/providers/index.html">❱ providers</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="src/providers/interfaces/index.html">❱ interfaces</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="src/providers/interfaces/IProvider.sol/interface.IProvider.html">IProvider</a></li><li class="chapter-item "><a href="src/providers/interfaces/IProviderManager.sol/interface.IProviderManager.html">IProviderManager</a></li></ol></li><li class="chapter-item "><a href="src/providers/oracles/index.html">❱ oracles</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="src/providers/oracles/ChainlinkOracle.sol/contract.ChainlinkOracle.html">ChainlinkOracle</a></li></ol></li><li class="chapter-item "><a href="src/providers/GoogleProvider.sol/contract.GoogleProvider.html">GoogleProvider</a></li><li class="chapter-item "><a href="src/providers/ProviderManager.sol/contract.ProviderManager.html">ProviderManager</a></li></ol></li><li class="chapter-item "><a href="src/verify/index.html">❱ verify</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="src/verify/Base64.sol/library.Base64.html">Base64</a></li><li class="chapter-item "><a href="src/verify/JsmnSolLib2.sol/library.JsmnSolLib2.html">JsmnSolLib2</a></li><li class="chapter-item "><a href="src/verify/SolRsaVerify.sol/library.SolRsaVerify.html">SolRsaVerify</a></li><li class="chapter-item "><a href="src/verify/Strings.sol/library.StringUtils.html">StringUtils</a></li><li class="chapter-item "><a href="src/verify/Verifier.sol/contract.Verifier.html">Verifier</a></li></ol></li><li class="chapter-item "><a href="src/SigmaWallet.sol/contract.SigmaWallet.html">SigmaWallet</a></li><li class="chapter-item "><a href="src/SigmaWalletFactory.sol/contract.SigmaWalletFactory.html">SigmaWalletFactory</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Foundry Template</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/threesigmaxyz/sigma-wallet" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="sigma-wallet"><a class="header" href="#sigma-wallet">sigma-wallet</a></h1>
<h2 id="description"><a class="header" href="#description">Description</a></h2>
<p>This repo implements the smart contracts for the sigma wallet project developed at ETHGlobalParis hackathob.
The main contracts developed are:</p>
<ul>
<li><code>ProviderManager.sol</code>: contract that manages the different providers and its public keys, it allows for the addition of providers (like for example GoogleProvider) as an authentication method.</li>
<li><code>GoogleProvider.sol</code>: <code>IProvider.sol</code> implementation for Google OAuth, allowing the user to log-in with their Google account.</li>
<li><code>SigmaWallet.sol</code>: Wallet contract, can only be accessed by the entrypoint, validates signatures and executes transactions</li>
<li><code>SigmaWalletFactory.sol</code>: contract that handles the creation of new wallets in case the user does not have one</li>
</ul>
<p>These contracts receive interactions from the front/backend and execute them.</p>
<h2 id="usage"><a class="header" href="#usage">Usage</a></h2>
<p>Here's a list of the most frequently needed commands.</p>
<h3 id="build"><a class="header" href="#build">Build</a></h3>
<p>Build the contracts:</p>
<pre><code class="language-sh">$ make build
</code></pre>
<h3 id="clean"><a class="header" href="#clean">Clean</a></h3>
<p>Delete the build artifacts and cache directories:</p>
<pre><code class="language-sh">$ make clean
</code></pre>
<h3 id="compile"><a class="header" href="#compile">Compile</a></h3>
<p>Compile the contracts:</p>
<pre><code class="language-sh">$ make build
</code></pre>
<h3 id="test"><a class="header" href="#test">Test</a></h3>
<p>To run all tests execute the following commad:</p>
<pre><code>make tests
</code></pre>
<h1 id="about-us"><a class="header" href="#about-us">About Us</a></h1>
<p><a href="https://threesigma.xyz/">Three Sigma</a> is a venture builder firm focused on blockchain engineering, research, and investment. Our mission is to advance the adoption of blockchain technology and contribute towards the healthy development of the Web3 space.</p>
<hr />
<p align="center">
  <img src="https://threesigma.xyz/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fthree-sigma-labs-research-capital-white.0f8e8f50.png&w=2048&q=75" width="75%" />
</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents"><a class="header" href="#contents">Contents</a></h1>
<ul>
<li><a href="src/dependencies/JsmnSolLib.sol/library.JsmnSolLib.html">JsmnSolLib</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="jsmnsollib"><a class="header" href="#jsmnsollib">JsmnSolLib</a></h1>
<p><a href="https://github.com/threesigmaxyz/sigma-wallet/blob/3363cbcbb9ec35ffd93a6f30954ff418e0bbb54b/src/dependencies/JsmnSolLib.sol">Git Source</a></p>
<h2 id="state-variables"><a class="header" href="#state-variables">State Variables</a></h2>
<h3 id="return_success"><a class="header" href="#return_success">RETURN_SUCCESS</a></h3>
<pre><code class="language-solidity">uint256 constant RETURN_SUCCESS = 0;
</code></pre>
<h3 id="return_error_invalid_json"><a class="header" href="#return_error_invalid_json">RETURN_ERROR_INVALID_JSON</a></h3>
<pre><code class="language-solidity">uint256 constant RETURN_ERROR_INVALID_JSON = 1;
</code></pre>
<h3 id="return_error_part"><a class="header" href="#return_error_part">RETURN_ERROR_PART</a></h3>
<pre><code class="language-solidity">uint256 constant RETURN_ERROR_PART = 2;
</code></pre>
<h3 id="return_error_no_mem"><a class="header" href="#return_error_no_mem">RETURN_ERROR_NO_MEM</a></h3>
<pre><code class="language-solidity">uint256 constant RETURN_ERROR_NO_MEM = 3;
</code></pre>
<h2 id="functions"><a class="header" href="#functions">Functions</a></h2>
<h3 id="init"><a class="header" href="#init">init</a></h3>
<pre><code class="language-solidity">function init(uint256 length) internal pure returns (Parser memory, Token[] memory);
</code></pre>
<h3 id="allocatetoken"><a class="header" href="#allocatetoken">allocateToken</a></h3>
<pre><code class="language-solidity">function allocateToken(Parser memory parser, Token[] memory tokens) internal pure returns (bool, Token memory);
</code></pre>
<h3 id="filltoken"><a class="header" href="#filltoken">fillToken</a></h3>
<pre><code class="language-solidity">function fillToken(Token memory token, JsmnType jsmnType, uint256 start, uint256 end) internal pure;
</code></pre>
<h3 id="parsestring"><a class="header" href="#parsestring">parseString</a></h3>
<pre><code class="language-solidity">function parseString(Parser memory parser, Token[] memory tokens, bytes memory s) internal pure returns (uint256);
</code></pre>
<h3 id="parseprimitive"><a class="header" href="#parseprimitive">parsePrimitive</a></h3>
<pre><code class="language-solidity">function parsePrimitive(Parser memory parser, Token[] memory tokens, bytes memory s) internal pure returns (uint256);
</code></pre>
<h3 id="parse"><a class="header" href="#parse">parse</a></h3>
<pre><code class="language-solidity">function parse(string memory json, uint256 numberElements)
    internal
    pure
    returns (uint256, Token[] memory tokens, uint256);
</code></pre>
<h3 id="getbytes"><a class="header" href="#getbytes">getBytes</a></h3>
<pre><code class="language-solidity">function getBytes(string memory json, uint256 start, uint256 end) internal pure returns (string memory);
</code></pre>
<h3 id="parseint"><a class="header" href="#parseint">parseInt</a></h3>
<pre><code class="language-solidity">function parseInt(string memory _a) internal pure returns (int256);
</code></pre>
<h3 id="parseint-1"><a class="header" href="#parseint-1">parseInt</a></h3>
<pre><code class="language-solidity">function parseInt(string memory _a, uint256 _b) internal pure returns (int256);
</code></pre>
<h3 id="uint2str"><a class="header" href="#uint2str">uint2str</a></h3>
<pre><code class="language-solidity">function uint2str(uint256 i) internal pure returns (string memory);
</code></pre>
<h3 id="parsebool"><a class="header" href="#parsebool">parseBool</a></h3>
<pre><code class="language-solidity">function parseBool(string memory _a) internal pure returns (bool);
</code></pre>
<h3 id="strcompare"><a class="header" href="#strcompare">strCompare</a></h3>
<pre><code class="language-solidity">function strCompare(string memory _a, string memory _b) internal pure returns (int256);
</code></pre>
<h2 id="structs"><a class="header" href="#structs">Structs</a></h2>
<h3 id="token"><a class="header" href="#token">Token</a></h3>
<pre><code class="language-solidity">struct Token {
    JsmnType jsmnType;
    uint256 start;
    bool startSet;
    uint256 end;
    bool endSet;
    uint8 size;
}
</code></pre>
<h3 id="parser"><a class="header" href="#parser">Parser</a></h3>
<pre><code class="language-solidity">struct Parser {
    uint256 pos;
    uint256 toknext;
    int256 toksuper;
}
</code></pre>
<h2 id="enums"><a class="header" href="#enums">Enums</a></h2>
<h3 id="jsmntype"><a class="header" href="#jsmntype">JsmnType</a></h3>
<pre><code class="language-solidity">enum JsmnType {
    UNDEFINED,
    OBJECT,
    ARRAY,
    STRING,
    PRIMITIVE
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-1"><a class="header" href="#contents-1">Contents</a></h1>
<ul>
<li><a href="src/providers//src/providers/interfaces">interfaces</a></li>
<li><a href="src/providers//src/providers/oracles">oracles</a></li>
<li><a href="src/providers/GoogleProvider.sol/contract.GoogleProvider.html">GoogleProvider</a></li>
<li><a href="src/providers/ProviderManager.sol/contract.ProviderManager.html">ProviderManager</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-2"><a class="header" href="#contents-2">Contents</a></h1>
<ul>
<li><a href="src/providers/interfaces/IProvider.sol/interface.IProvider.html">IProvider</a></li>
<li><a href="src/providers/interfaces/IProviderManager.sol/interface.IProviderManager.html">IProviderManager</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="iprovider"><a class="header" href="#iprovider">IProvider</a></h1>
<p><a href="https://github.com/threesigmaxyz/sigma-wallet/blob/3363cbcbb9ec35ffd93a6f30954ff418e0bbb54b/src/providers/interfaces/IProvider.sol">Git Source</a></p>
<h2 id="functions-1"><a class="header" href="#functions-1">Functions</a></h2>
<h3 id="verifytoken"><a class="header" href="#verifytoken">verifyToken</a></h3>
<pre><code class="language-solidity">function verifyToken(string memory headerJson, string memory payloadJson, bytes memory signature, string memory subject)
    external
    view
    returns (bool);
</code></pre>
<h3 id="requestpublickeysupdate"><a class="header" href="#requestpublickeysupdate">requestPublicKeysUpdate</a></h3>
<pre><code class="language-solidity">function requestPublicKeysUpdate(string calldata source, uint32 gasLimit) external returns (bytes32);
</code></pre>
<h3 id="name"><a class="header" href="#name">name</a></h3>
<pre><code class="language-solidity">function name() external view returns (string memory);
</code></pre>
<h3 id="addkeys"><a class="header" href="#addkeys">addKeys</a></h3>
<pre><code class="language-solidity">function addKeys(bytes memory publicKeys_) external;
</code></pre>
<h2 id="errors"><a class="header" href="#errors">Errors</a></h2>
<h3 id="onlyprovidermanager"><a class="header" href="#onlyprovidermanager">OnlyProviderManager</a></h3>
<pre><code class="language-solidity">error OnlyProviderManager(address);
</code></pre>
<h3 id="nooracleerror"><a class="header" href="#nooracleerror">NoOracleError</a></h3>
<pre><code class="language-solidity">error NoOracleError();
</code></pre>
<h3 id="onlyoracle"><a class="header" href="#onlyoracle">OnlyOracle</a></h3>
<pre><code class="language-solidity">error OnlyOracle(address);
</code></pre>
<h3 id="invalidtokenerror"><a class="header" href="#invalidtokenerror">InvalidTokenError</a></h3>
<pre><code class="language-solidity">error InvalidTokenError(bytes);
</code></pre>
<h2 id="structs-1"><a class="header" href="#structs-1">Structs</a></h2>
<h3 id="publickey"><a class="header" href="#publickey">PublicKey</a></h3>
<pre><code class="language-solidity">struct PublicKey {
    string kuid;
    bytes32 modulusHash;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="iprovidermanager"><a class="header" href="#iprovidermanager">IProviderManager</a></h1>
<p><a href="https://github.com/threesigmaxyz/sigma-wallet/blob/3363cbcbb9ec35ffd93a6f30954ff418e0bbb54b/src/providers/interfaces/IProviderManager.sol">Git Source</a></p>
<h2 id="functions-2"><a class="header" href="#functions-2">Functions</a></h2>
<h3 id="verifytoken-1"><a class="header" href="#verifytoken-1">verifyToken</a></h3>
<pre><code class="language-solidity">function verifyToken(
    string memory providerName_,
    string memory headerJson,
    string memory payloadJson,
    bytes memory signature,
    string memory subject
) external view returns (bool);
</code></pre>
<h3 id="updateproviderpublickeys"><a class="header" href="#updateproviderpublickeys">updateProviderPublicKeys</a></h3>
<pre><code class="language-solidity">function updateProviderPublicKeys(string memory providerName_, string calldata source, uint32 gasLimit) external;
</code></pre>
<h3 id="addprovider"><a class="header" href="#addprovider">addProvider</a></h3>
<pre><code class="language-solidity">function addProvider(bytes memory providerBytecode_) external;
</code></pre>
<h3 id="updateprovider"><a class="header" href="#updateprovider">updateProvider</a></h3>
<pre><code class="language-solidity">function updateProvider(bytes memory providerBytecode_, uint256 providerIndex_) external;
</code></pre>
<h3 id="getproviders"><a class="header" href="#getproviders">getProviders</a></h3>
<pre><code class="language-solidity">function getProviders() external view returns (Provider[] memory providers_);
</code></pre>
<h3 id="forceupdateproviderpublickeys"><a class="header" href="#forceupdateproviderpublickeys">forceUpdateProviderPublicKeys</a></h3>
<pre><code class="language-solidity">function forceUpdateProviderPublicKeys(string memory providerName_, bytes memory publicKeys_) external;
</code></pre>
<h3 id="addprovidersimple"><a class="header" href="#addprovidersimple">addProviderSimple</a></h3>
<pre><code class="language-solidity">function addProviderSimple(IProvider provider_, string memory providerName_) external;
</code></pre>
<h2 id="errors-1"><a class="header" href="#errors-1">Errors</a></h2>
<h3 id="onlygovernanceerror"><a class="header" href="#onlygovernanceerror">OnlyGovernanceError</a></h3>
<pre><code class="language-solidity">error OnlyGovernanceError(address);
</code></pre>
<h3 id="provideralreadyexistserror"><a class="header" href="#provideralreadyexistserror">ProviderAlreadyExistsError</a></h3>
<pre><code class="language-solidity">error ProviderAlreadyExistsError(string providerName);
</code></pre>
<h3 id="providerdoesnotexisterror"><a class="header" href="#providerdoesnotexisterror">ProviderDoesNotExistError</a></h3>
<pre><code class="language-solidity">error ProviderDoesNotExistError(string providerName);
</code></pre>
<h3 id="wrongproviderindexerror"><a class="header" href="#wrongproviderindexerror">WrongProviderIndexError</a></h3>
<pre><code class="language-solidity">error WrongProviderIndexError(uint256 index);
</code></pre>
<h3 id="providernotfounderror"><a class="header" href="#providernotfounderror">ProviderNotFoundError</a></h3>
<pre><code class="language-solidity">error ProviderNotFoundError(string providerName);
</code></pre>
<h2 id="structs-2"><a class="header" href="#structs-2">Structs</a></h2>
<h3 id="provider"><a class="header" href="#provider">Provider</a></h3>
<pre><code class="language-solidity">struct Provider {
    string name;
    address providerAddress;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-3"><a class="header" href="#contents-3">Contents</a></h1>
<ul>
<li><a href="src/providers/oracles/ChainlinkOracle.sol/contract.ChainlinkOracle.html">ChainlinkOracle</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="chainlinkoracle"><a class="header" href="#chainlinkoracle">ChainlinkOracle</a></h1>
<p><a href="https://github.com/threesigmaxyz/sigma-wallet/blob/3363cbcbb9ec35ffd93a6f30954ff418e0bbb54b/src/providers/oracles/ChainlinkOracle.sol">Git Source</a></p>
<h2 id="functions-3"><a class="header" href="#functions-3">Functions</a></h2>
<h3 id="constructor"><a class="header" href="#constructor">constructor</a></h3>
<pre><code class="language-solidity">constructor();
</code></pre>
<h3 id="sendrequest"><a class="header" href="#sendrequest">sendRequest</a></h3>
<pre><code class="language-solidity">function sendRequest(uint64 subscriptionId, bytes calldata data, uint32 gasLimit) external pure returns (bytes32);
</code></pre>
<h3 id="getregistry"><a class="header" href="#getregistry">getRegistry</a></h3>
<pre><code class="language-solidity">function getRegistry() external view returns (address);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="googleprovider"><a class="header" href="#googleprovider">GoogleProvider</a></h1>
<p><a href="https://github.com/threesigmaxyz/sigma-wallet/blob/3363cbcbb9ec35ffd93a6f30954ff418e0bbb54b/src/providers/GoogleProvider.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
FunctionsClient, <a href="src/providers/GoogleProvider.sol//src/verify/Verifier.sol/contract.Verifier.html">Verifier</a>, <a href="src/providers/GoogleProvider.sol//src/providers/interfaces/IProvider.sol/interface.IProvider.html">IProvider</a></p>
<h2 id="state-variables-1"><a class="header" href="#state-variables-1">State Variables</a></h2>
<h3 id="_name"><a class="header" href="#_name">_name</a></h3>
<pre><code class="language-solidity">string internal constant _name = &quot;Google&quot;;
</code></pre>
<h3 id="_publickeysurl"><a class="header" href="#_publickeysurl">_publicKeysUrl</a></h3>
<pre><code class="language-solidity">string internal constant _publicKeysUrl =
    &quot;https://www.googleapis.com/robot/v1/metadata/x509/securetoken@system.gserviceaccount.com&quot;;
</code></pre>
<h3 id="_providermanager"><a class="header" href="#_providermanager">_providerManager</a></h3>
<pre><code class="language-solidity">address internal immutable _providerManager;
</code></pre>
<h3 id="_oracle"><a class="header" href="#_oracle">_oracle</a></h3>
<pre><code class="language-solidity">address internal immutable _oracle;
</code></pre>
<h3 id="_subscriptionid"><a class="header" href="#_subscriptionid">_subscriptionId</a></h3>
<pre><code class="language-solidity">uint64 internal constant _subscriptionId = 3845;
</code></pre>
<h2 id="functions-4"><a class="header" href="#functions-4">Functions</a></h2>
<h3 id="onlyprovidermanager-1"><a class="header" href="#onlyprovidermanager-1">onlyProviderManager</a></h3>
<pre><code class="language-solidity">modifier onlyProviderManager();
</code></pre>
<h3 id="constructor-1"><a class="header" href="#constructor-1">constructor</a></h3>
<pre><code class="language-solidity">constructor(address oracle_) FunctionsClient(oracle_);
</code></pre>
<h3 id="verifytoken-2"><a class="header" href="#verifytoken-2">verifyToken</a></h3>
<pre><code class="language-solidity">function verifyToken(string memory headerJson, string memory payloadJson, bytes memory signature, string memory subject)
    external
    view
    override
    returns (bool);
</code></pre>
<h3 id="requestpublickeysupdate-1"><a class="header" href="#requestpublickeysupdate-1">requestPublicKeysUpdate</a></h3>
<pre><code class="language-solidity">function requestPublicKeysUpdate(string calldata source, uint32 gasLimit) external returns (bytes32);
</code></pre>
<h3 id="fulfillrequest"><a class="header" href="#fulfillrequest">fulfillRequest</a></h3>
<pre><code class="language-solidity">function fulfillRequest(bytes32 requestId, bytes memory response, bytes memory err) internal override;
</code></pre>
<h3 id="name-1"><a class="header" href="#name-1">name</a></h3>
<pre><code class="language-solidity">function name() external pure override returns (string memory);
</code></pre>
<h3 id="addkeys-1"><a class="header" href="#addkeys-1">addKeys</a></h3>
<pre><code class="language-solidity">function addKeys(bytes memory publicKeys_) external override;
</code></pre>
<h2 id="events"><a class="header" href="#events">Events</a></h2>
<h3 id="newkeys"><a class="header" href="#newkeys">newKeys</a></h3>
<pre><code class="language-solidity">event newKeys(bytes32 indexed requestId, string result, bytes err, uint256 index);
</code></pre>
<h3 id="debugevent"><a class="header" href="#debugevent">DebugEvent</a></h3>
<pre><code class="language-solidity">event DebugEvent();
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="providermanager"><a class="header" href="#providermanager">ProviderManager</a></h1>
<p><a href="https://github.com/threesigmaxyz/sigma-wallet/blob/3363cbcbb9ec35ffd93a6f30954ff418e0bbb54b/src/providers/ProviderManager.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="src/providers/ProviderManager.sol//src/providers/interfaces/IProviderManager.sol/interface.IProviderManager.html">IProviderManager</a></p>
<h2 id="state-variables-2"><a class="header" href="#state-variables-2">State Variables</a></h2>
<h3 id="_providers"><a class="header" href="#_providers">_providers</a></h3>
<pre><code class="language-solidity">mapping(string =&gt; IProvider) internal _providers;
</code></pre>
<h3 id="_providerlist"><a class="header" href="#_providerlist">_providerList</a></h3>
<pre><code class="language-solidity">IProvider[] internal _providerList;
</code></pre>
<h3 id="_governance"><a class="header" href="#_governance">_governance</a></h3>
<pre><code class="language-solidity">address internal _governance;
</code></pre>
<h2 id="functions-5"><a class="header" href="#functions-5">Functions</a></h2>
<h3 id="onlygovernance"><a class="header" href="#onlygovernance">onlyGovernance</a></h3>
<pre><code class="language-solidity">modifier onlyGovernance();
</code></pre>
<h3 id="constructor-2"><a class="header" href="#constructor-2">constructor</a></h3>
<pre><code class="language-solidity">constructor();
</code></pre>
<h3 id="verifytoken-3"><a class="header" href="#verifytoken-3">verifyToken</a></h3>
<pre><code class="language-solidity">function verifyToken(
    string memory providerName_,
    string memory headerJson,
    string memory payloadJson,
    bytes memory signature,
    string memory subject
) external view override returns (bool);
</code></pre>
<h3 id="updateproviderpublickeys-1"><a class="header" href="#updateproviderpublickeys-1">updateProviderPublicKeys</a></h3>
<pre><code class="language-solidity">function updateProviderPublicKeys(string memory providerName_, string calldata source, uint32 gasLimit)
    external
    override;
</code></pre>
<h3 id="addprovider-1"><a class="header" href="#addprovider-1">addProvider</a></h3>
<pre><code class="language-solidity">function addProvider(bytes memory providerBytecode_) external override onlyGovernance;
</code></pre>
<h3 id="addprovidersimple-1"><a class="header" href="#addprovidersimple-1">addProviderSimple</a></h3>
<pre><code class="language-solidity">function addProviderSimple(IProvider provider_, string memory providerName_) external override onlyGovernance;
</code></pre>
<h3 id="updateprovider-1"><a class="header" href="#updateprovider-1">updateProvider</a></h3>
<pre><code class="language-solidity">function updateProvider(bytes memory providerBytecode_, uint256 providerIndex_) external override onlyGovernance;
</code></pre>
<h3 id="forceupdateproviderpublickeys-1"><a class="header" href="#forceupdateproviderpublickeys-1">forceUpdateProviderPublicKeys</a></h3>
<pre><code class="language-solidity">function forceUpdateProviderPublicKeys(string memory name_, bytes memory keys_) external override onlyGovernance;
</code></pre>
<h3 id="getproviders-1"><a class="header" href="#getproviders-1">getProviders</a></h3>
<pre><code class="language-solidity">function getProviders() external view override returns (Provider[] memory providers_);
</code></pre>
<h3 id="_addprovider"><a class="header" href="#_addprovider">_addProvider</a></h3>
<pre><code class="language-solidity">function _addProvider(bytes memory bytecode_) internal returns (IProvider, string memory);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-4"><a class="header" href="#contents-4">Contents</a></h1>
<ul>
<li><a href="src/verify/Base64.sol/library.Base64.html">Base64</a></li>
<li><a href="src/verify/JsmnSolLib2.sol/library.JsmnSolLib2.html">JsmnSolLib2</a></li>
<li><a href="src/verify/SolRsaVerify.sol/library.SolRsaVerify.html">SolRsaVerify</a></li>
<li><a href="src/verify/Strings.sol/library.StringUtils.html">StringUtils</a></li>
<li><a href="src/verify/Verifier.sol/contract.Verifier.html">Verifier</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="base64"><a class="header" href="#base64">Base64</a></h1>
<p><a href="https://github.com/threesigmaxyz/sigma-wallet/blob/3363cbcbb9ec35ffd93a6f30954ff418e0bbb54b/src/verify/Base64.sol">Git Source</a></p>
<h2 id="state-variables-3"><a class="header" href="#state-variables-3">State Variables</a></h2>
<h3 id="base64stdchars"><a class="header" href="#base64stdchars">base64stdchars</a></h3>
<pre><code class="language-solidity">bytes private constant base64stdchars = &quot;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/&quot;;
</code></pre>
<h3 id="base64urlchars"><a class="header" href="#base64urlchars">base64urlchars</a></h3>
<pre><code class="language-solidity">bytes private constant base64urlchars = &quot;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_&quot;;
</code></pre>
<h2 id="functions-6"><a class="header" href="#functions-6">Functions</a></h2>
<h3 id="encode"><a class="header" href="#encode">encode</a></h3>
<pre><code class="language-solidity">function encode(string memory _str) internal pure returns (string memory);
</code></pre>
<h3 id="encode3"><a class="header" href="#encode3">encode3</a></h3>
<pre><code class="language-solidity">function encode3(uint256 a0, uint256 a1, uint256 a2)
    private
    pure
    returns (bytes1 b0, bytes1 b1, bytes1 b2, bytes1 b3);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="jsmnsollib2"><a class="header" href="#jsmnsollib2">JsmnSolLib2</a></h1>
<p><a href="https://github.com/threesigmaxyz/sigma-wallet/blob/3363cbcbb9ec35ffd93a6f30954ff418e0bbb54b/src/verify/JsmnSolLib2.sol">Git Source</a></p>
<h2 id="state-variables-4"><a class="header" href="#state-variables-4">State Variables</a></h2>
<h3 id="return_success-1"><a class="header" href="#return_success-1">RETURN_SUCCESS</a></h3>
<pre><code class="language-solidity">uint256 constant RETURN_SUCCESS = 0;
</code></pre>
<h3 id="return_error_invalid_json-1"><a class="header" href="#return_error_invalid_json-1">RETURN_ERROR_INVALID_JSON</a></h3>
<pre><code class="language-solidity">uint256 constant RETURN_ERROR_INVALID_JSON = 1;
</code></pre>
<h3 id="return_error_part-1"><a class="header" href="#return_error_part-1">RETURN_ERROR_PART</a></h3>
<pre><code class="language-solidity">uint256 constant RETURN_ERROR_PART = 2;
</code></pre>
<h3 id="return_error_no_mem-1"><a class="header" href="#return_error_no_mem-1">RETURN_ERROR_NO_MEM</a></h3>
<pre><code class="language-solidity">uint256 constant RETURN_ERROR_NO_MEM = 3;
</code></pre>
<h2 id="functions-7"><a class="header" href="#functions-7">Functions</a></h2>
<h3 id="init-1"><a class="header" href="#init-1">init</a></h3>
<pre><code class="language-solidity">function init(uint256 length) internal pure returns (Parser memory, Token[] memory);
</code></pre>
<h3 id="allocatetoken-1"><a class="header" href="#allocatetoken-1">allocateToken</a></h3>
<pre><code class="language-solidity">function allocateToken(Parser memory parser, Token[] memory tokens) internal pure returns (bool, Token memory);
</code></pre>
<h3 id="filltoken-1"><a class="header" href="#filltoken-1">fillToken</a></h3>
<pre><code class="language-solidity">function fillToken(Token memory token, JsmnType jsmnType, uint256 start, uint256 end) internal pure;
</code></pre>
<h3 id="parsestring-1"><a class="header" href="#parsestring-1">parseString</a></h3>
<pre><code class="language-solidity">function parseString(Parser memory parser, Token[] memory tokens, bytes memory s) internal pure returns (uint256);
</code></pre>
<h3 id="parseprimitive-1"><a class="header" href="#parseprimitive-1">parsePrimitive</a></h3>
<pre><code class="language-solidity">function parsePrimitive(Parser memory parser, Token[] memory tokens, bytes memory s) internal pure returns (uint256);
</code></pre>
<h3 id="parse-1"><a class="header" href="#parse-1">parse</a></h3>
<pre><code class="language-solidity">function parse(string memory json, uint256 numberElements)
    internal
    pure
    returns (uint256, Token[] memory tokens, uint256);
</code></pre>
<h3 id="getbytes-1"><a class="header" href="#getbytes-1">getBytes</a></h3>
<pre><code class="language-solidity">function getBytes(string memory json, uint256 start, uint256 end) internal pure returns (string memory);
</code></pre>
<h3 id="parseint-2"><a class="header" href="#parseint-2">parseInt</a></h3>
<pre><code class="language-solidity">function parseInt(string memory _a) internal pure returns (int256);
</code></pre>
<h3 id="parseint-3"><a class="header" href="#parseint-3">parseInt</a></h3>
<pre><code class="language-solidity">function parseInt(string memory _a, uint256 _b) internal pure returns (int256);
</code></pre>
<h3 id="uint2str-1"><a class="header" href="#uint2str-1">uint2str</a></h3>
<pre><code class="language-solidity">function uint2str(uint256 i) internal pure returns (string memory);
</code></pre>
<h3 id="parsebool-1"><a class="header" href="#parsebool-1">parseBool</a></h3>
<pre><code class="language-solidity">function parseBool(string memory _a) internal pure returns (bool);
</code></pre>
<h3 id="strcompare-1"><a class="header" href="#strcompare-1">strCompare</a></h3>
<pre><code class="language-solidity">function strCompare(string memory _a, string memory _b) internal pure returns (int256);
</code></pre>
<h2 id="structs-3"><a class="header" href="#structs-3">Structs</a></h2>
<h3 id="token-1"><a class="header" href="#token-1">Token</a></h3>
<pre><code class="language-solidity">struct Token {
    JsmnType jsmnType;
    uint256 start;
    bool startSet;
    uint256 end;
    bool endSet;
    uint8 size;
}
</code></pre>
<h3 id="parser-1"><a class="header" href="#parser-1">Parser</a></h3>
<pre><code class="language-solidity">struct Parser {
    uint256 pos;
    uint256 toknext;
    int256 toksuper;
}
</code></pre>
<h2 id="enums-1"><a class="header" href="#enums-1">Enums</a></h2>
<h3 id="jsmntype-1"><a class="header" href="#jsmntype-1">JsmnType</a></h3>
<pre><code class="language-solidity">enum JsmnType {
    UNDEFINED,
    OBJECT,
    ARRAY,
    STRING,
    PRIMITIVE
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="solrsaverify"><a class="header" href="#solrsaverify">SolRsaVerify</a></h1>
<p><a href="https://github.com/threesigmaxyz/sigma-wallet/blob/3363cbcbb9ec35ffd93a6f30954ff418e0bbb54b/src/verify/SolRsaVerify.sol">Git Source</a></p>
<h2 id="functions-8"><a class="header" href="#functions-8">Functions</a></h2>
<h3 id="memcpy"><a class="header" href="#memcpy">memcpy</a></h3>
<pre><code class="language-solidity">function memcpy(uint256 _dest, uint256 _src, uint256 _len) internal pure;
</code></pre>
<h3 id="join"><a class="header" href="#join">join</a></h3>
<pre><code class="language-solidity">function join(bytes memory _s, bytes memory _e, bytes memory _m) internal pure returns (bytes memory);
</code></pre>
<h3 id="pkcs1sha256verify"><a class="header" href="#pkcs1sha256verify">pkcs1Sha256Verify</a></h3>
<p><em>Verifies a PKCSv1.5 SSolRsaVerifyHA256 signature</em></p>
<pre><code class="language-solidity">function pkcs1Sha256Verify(bytes32 _sha256, bytes memory _s, bytes memory _e, bytes memory _m)
    public
    view
    returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_sha256</code></td><td><code>bytes32</code></td><td>is the sha256 of the data</td></tr>
<tr><td><code>_s</code></td><td><code>bytes</code></td><td>is the signature</td></tr>
<tr><td><code>_e</code></td><td><code>bytes</code></td><td>is the exponent</td></tr>
<tr><td><code>_m</code></td><td><code>bytes</code></td><td>is the modulus</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>0 if success, &gt;0 otherwise</td></tr>
</tbody></table>
</div>
<h3 id="pkcs1sha256verifyraw"><a class="header" href="#pkcs1sha256verifyraw">pkcs1Sha256VerifyRaw</a></h3>
<p>decipher
0x00 || 0x01 || PS || 0x00 || DigestInfo
PS is padding filled with 0xff</p>
<p><em>Verifies a PKCSv1.5 SHA256 signature</em></p>
<pre><code class="language-solidity">function pkcs1Sha256VerifyRaw(bytes memory _data, bytes memory _s, bytes memory _e, bytes memory _m)
    internal
    view
    returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_data</code></td><td><code>bytes</code></td><td>to verify</td></tr>
<tr><td><code>_s</code></td><td><code>bytes</code></td><td>is the signature</td></tr>
<tr><td><code>_e</code></td><td><code>bytes</code></td><td>is the exponent</td></tr>
<tr><td><code>_m</code></td><td><code>bytes</code></td><td>is the modulus</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>0 if success, &gt;0 otherwise</td></tr>
</tbody></table>
</div>
<h3 id="pkcs1sha256verifystr"><a class="header" href="#pkcs1sha256verifystr">pkcs1Sha256VerifyStr</a></h3>
<pre><code class="language-solidity">function pkcs1Sha256VerifyStr(string memory _data, bytes memory _s, bytes memory _e, bytes memory _m)
    internal
    view
    returns (uint256);
</code></pre>
<h3 id="pkcs1sha256verifystring"><a class="header" href="#pkcs1sha256verifystring">pkcs1Sha256VerifyString</a></h3>
<pre><code class="language-solidity">function pkcs1Sha256VerifyString(string memory _data, bytes memory _s, bytes memory _e, bytes memory _m)
    internal
    pure
    returns (uint256);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="stringutils"><a class="header" href="#stringutils">StringUtils</a></h1>
<p><a href="https://github.com/threesigmaxyz/sigma-wallet/blob/3363cbcbb9ec35ffd93a6f30954ff418e0bbb54b/src/verify/Strings.sol">Git Source</a></p>
<h2 id="functions-9"><a class="header" href="#functions-9">Functions</a></h2>
<h3 id="memcpy-1"><a class="header" href="#memcpy-1">memcpy</a></h3>
<pre><code class="language-solidity">function memcpy(uint256 dest, uint256 src, uint256 len_) private pure;
</code></pre>
<h3 id="toslice"><a class="header" href="#toslice">toSlice</a></h3>
<pre><code class="language-solidity">function toSlice(string memory self) internal pure returns (slice memory);
</code></pre>
<h3 id="len"><a class="header" href="#len">len</a></h3>
<pre><code class="language-solidity">function len(bytes32 self) internal pure returns (uint256);
</code></pre>
<h3 id="tosliceb32"><a class="header" href="#tosliceb32">toSliceB32</a></h3>
<pre><code class="language-solidity">function toSliceB32(bytes32 self) internal pure returns (slice memory ret);
</code></pre>
<h3 id="copy"><a class="header" href="#copy">copy</a></h3>
<pre><code class="language-solidity">function copy(slice memory self) internal pure returns (slice memory);
</code></pre>
<h3 id="tostring"><a class="header" href="#tostring">toString</a></h3>
<pre><code class="language-solidity">function toString(slice memory self) internal pure returns (string memory);
</code></pre>
<h3 id="len-1"><a class="header" href="#len-1">len</a></h3>
<pre><code class="language-solidity">function len(slice memory self) internal pure returns (uint256 l);
</code></pre>
<h3 id="empty"><a class="header" href="#empty">empty</a></h3>
<pre><code class="language-solidity">function empty(slice memory self) internal pure returns (bool);
</code></pre>
<h3 id="compare"><a class="header" href="#compare">compare</a></h3>
<pre><code class="language-solidity">function compare(slice memory self, slice memory other) internal pure returns (int256);
</code></pre>
<h3 id="equals"><a class="header" href="#equals">equals</a></h3>
<pre><code class="language-solidity">function equals(slice memory self, slice memory other) internal pure returns (bool);
</code></pre>
<h3 id="nextrune"><a class="header" href="#nextrune">nextRune</a></h3>
<pre><code class="language-solidity">function nextRune(slice memory self, slice memory rune) internal pure returns (slice memory);
</code></pre>
<h3 id="nextrune-1"><a class="header" href="#nextrune-1">nextRune</a></h3>
<pre><code class="language-solidity">function nextRune(slice memory self) internal pure returns (slice memory ret);
</code></pre>
<h3 id="ord"><a class="header" href="#ord">ord</a></h3>
<pre><code class="language-solidity">function ord(slice memory self) internal pure returns (uint256 ret);
</code></pre>
<h3 id="keccak"><a class="header" href="#keccak">keccak</a></h3>
<pre><code class="language-solidity">function keccak(slice memory self) internal pure returns (bytes32 ret);
</code></pre>
<h3 id="startswith"><a class="header" href="#startswith">startsWith</a></h3>
<pre><code class="language-solidity">function startsWith(slice memory self, slice memory needle) internal pure returns (bool);
</code></pre>
<h3 id="beyond"><a class="header" href="#beyond">beyond</a></h3>
<pre><code class="language-solidity">function beyond(slice memory self, slice memory needle) internal pure returns (slice memory);
</code></pre>
<h3 id="endswith"><a class="header" href="#endswith">endsWith</a></h3>
<pre><code class="language-solidity">function endsWith(slice memory self, slice memory needle) internal pure returns (bool);
</code></pre>
<h3 id="until"><a class="header" href="#until">until</a></h3>
<pre><code class="language-solidity">function until(slice memory self, slice memory needle) internal pure returns (slice memory);
</code></pre>
<h3 id="findptr"><a class="header" href="#findptr">findPtr</a></h3>
<pre><code class="language-solidity">function findPtr(uint256 selflen, uint256 selfptr, uint256 needlelen, uint256 needleptr)
    private
    pure
    returns (uint256);
</code></pre>
<h3 id="rfindptr"><a class="header" href="#rfindptr">rfindPtr</a></h3>
<pre><code class="language-solidity">function rfindPtr(uint256 selflen, uint256 selfptr, uint256 needlelen, uint256 needleptr)
    private
    pure
    returns (uint256);
</code></pre>
<h3 id="find"><a class="header" href="#find">find</a></h3>
<pre><code class="language-solidity">function find(slice memory self, slice memory needle) internal pure returns (slice memory);
</code></pre>
<h3 id="rfind"><a class="header" href="#rfind">rfind</a></h3>
<pre><code class="language-solidity">function rfind(slice memory self, slice memory needle) internal pure returns (slice memory);
</code></pre>
<h3 id="split"><a class="header" href="#split">split</a></h3>
<pre><code class="language-solidity">function split(slice memory self, slice memory needle, slice memory token) internal pure returns (slice memory);
</code></pre>
<h3 id="split-1"><a class="header" href="#split-1">split</a></h3>
<pre><code class="language-solidity">function split(slice memory self, slice memory needle) internal pure returns (slice memory token);
</code></pre>
<h3 id="rsplit"><a class="header" href="#rsplit">rsplit</a></h3>
<pre><code class="language-solidity">function rsplit(slice memory self, slice memory needle, slice memory token) internal pure returns (slice memory);
</code></pre>
<h3 id="rsplit-1"><a class="header" href="#rsplit-1">rsplit</a></h3>
<pre><code class="language-solidity">function rsplit(slice memory self, slice memory needle) internal pure returns (slice memory token);
</code></pre>
<h3 id="count"><a class="header" href="#count">count</a></h3>
<pre><code class="language-solidity">function count(slice memory self, slice memory needle) internal pure returns (uint256 cnt);
</code></pre>
<h3 id="contains"><a class="header" href="#contains">contains</a></h3>
<pre><code class="language-solidity">function contains(slice memory self, slice memory needle) internal pure returns (bool);
</code></pre>
<h3 id="concat"><a class="header" href="#concat">concat</a></h3>
<pre><code class="language-solidity">function concat(slice memory self, slice memory other) internal pure returns (string memory);
</code></pre>
<h3 id="join-1"><a class="header" href="#join-1">join</a></h3>
<pre><code class="language-solidity">function join(slice memory self, slice[] memory parts) internal pure returns (string memory);
</code></pre>
<h2 id="structs-4"><a class="header" href="#structs-4">Structs</a></h2>
<h3 id="slice"><a class="header" href="#slice">slice</a></h3>
<pre><code class="language-solidity">struct slice {
    uint256 _len;
    uint256 _ptr;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="verifier"><a class="header" href="#verifier">Verifier</a></h1>
<p><a href="https://github.com/threesigmaxyz/sigma-wallet/blob/3363cbcbb9ec35ffd93a6f30954ff418e0bbb54b/src/verify/Verifier.sol">Git Source</a></p>
<h2 id="state-variables-5"><a class="header" href="#state-variables-5">State Variables</a></h2>
<h3 id="keys"><a class="header" href="#keys">keys</a></h3>
<pre><code class="language-solidity">mapping(string =&gt; bytes) keys;
</code></pre>
<h2 id="functions-10"><a class="header" href="#functions-10">Functions</a></h2>
<h3 id="_verifytoken"><a class="header" href="#_verifytoken">_verifyToken</a></h3>
<pre><code class="language-solidity">function _verifyToken(
    string memory headerJson,
    string memory payloadJson,
    bytes memory signature,
    string memory subject
) internal view;
</code></pre>
<h3 id="_parseheader"><a class="header" href="#_parseheader">_parseHeader</a></h3>
<pre><code class="language-solidity">function _parseHeader(string memory json) internal pure returns (string memory kid);
</code></pre>
<h3 id="_parsetoken"><a class="header" href="#_parsetoken">_parseToken</a></h3>
<pre><code class="language-solidity">function _parseToken(string memory json)
    internal
    pure
    returns (string memory aud, string memory nonce, string memory sub);
</code></pre>
<h3 id="_getrsamodulus"><a class="header" href="#_getrsamodulus">_getRsaModulus</a></h3>
<pre><code class="language-solidity">function _getRsaModulus(string memory kid) internal view returns (bytes memory modulus);
</code></pre>
<h3 id="_getrsaexponent"><a class="header" href="#_getrsaexponent">_getRsaExponent</a></h3>
<pre><code class="language-solidity">function _getRsaExponent(string memory) internal pure returns (bytes memory);
</code></pre>
<h3 id="_addkey"><a class="header" href="#_addkey">_addKey</a></h3>
<pre><code class="language-solidity">function _addKey(string memory kid, bytes memory modulus) internal;
</code></pre>
<h2 id="events-1"><a class="header" href="#events-1">Events</a></h2>
<h3 id="newkey"><a class="header" href="#newkey">newKey</a></h3>
<pre><code class="language-solidity">event newKey(string indexed kid, bytes indexed modulus);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="sigmawallet"><a class="header" href="#sigmawallet">SigmaWallet</a></h1>
<p><a href="https://github.com/threesigmaxyz/sigma-wallet/blob/3363cbcbb9ec35ffd93a6f30954ff418e0bbb54b/src/SigmaWallet.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
BaseAccount, TokenCallbackHandler, UUPSUpgradeable, Initializable</p>
<p>minimal account.
this is sample minimal account.
has execute, eth handling methods
has a single signer that can send requests through the entryPoint.</p>
<h2 id="state-variables-6"><a class="header" href="#state-variables-6">State Variables</a></h2>
<h3 id="ownerid"><a class="header" href="#ownerid">ownerId</a></h3>
<pre><code class="language-solidity">string public ownerId;
</code></pre>
<h3 id="_providermanager-1"><a class="header" href="#_providermanager-1">_providerManager</a></h3>
<pre><code class="language-solidity">IProviderManager internal immutable _providerManager;
</code></pre>
<h3 id="_nonce"><a class="header" href="#_nonce">_nonce</a></h3>
<pre><code class="language-solidity">uint96 internal _nonce;
</code></pre>
<h3 id="_entrypoint"><a class="header" href="#_entrypoint">_entryPoint</a></h3>
<pre><code class="language-solidity">IEntryPoint private immutable _entryPoint;
</code></pre>
<h2 id="functions-11"><a class="header" href="#functions-11">Functions</a></h2>
<h3 id="entrypoint"><a class="header" href="#entrypoint">entryPoint</a></h3>
<pre><code class="language-solidity">function entryPoint() public view virtual override returns (IEntryPoint);
</code></pre>
<h3 id="receive"><a class="header" href="#receive">receive</a></h3>
<pre><code class="language-solidity">receive() external payable;
</code></pre>
<h3 id="constructor-3"><a class="header" href="#constructor-3">constructor</a></h3>
<pre><code class="language-solidity">constructor(IEntryPoint anEntryPoint, IProviderManager providerManager_);
</code></pre>
<h3 id="execute"><a class="header" href="#execute">execute</a></h3>
<p>execute a transaction (called directly from entryPoint)</p>
<pre><code class="language-solidity">function execute(address dest, uint256 value, bytes calldata func) external;
</code></pre>
<h3 id="executebatch"><a class="header" href="#executebatch">executeBatch</a></h3>
<p>execute a sequence of transactions</p>
<pre><code class="language-solidity">function executeBatch(address[] calldata dest, bytes[] calldata func) external;
</code></pre>
<h3 id="initialize"><a class="header" href="#initialize">initialize</a></h3>
<p><em>The _entryPoint member is immutable, to reduce gas consumption.  To upgrade EntryPoint,
a new implementation of SimpleAccount must be deployed with the new EntryPoint address, then upgrading
the implementation by calling <code>upgradeTo()</code></em></p>
<pre><code class="language-solidity">function initialize(string memory anOwnerid) public virtual initializer;
</code></pre>
<h3 id="_initialize"><a class="header" href="#_initialize">_initialize</a></h3>
<pre><code class="language-solidity">function _initialize(string memory anOwnerid) internal virtual;
</code></pre>
<h3 id="_validatesignature"><a class="header" href="#_validatesignature">_validateSignature</a></h3>
<p>implement template method of BaseAccount</p>
<pre><code class="language-solidity">function _validateSignature(UserOperation calldata userOp, bytes32 userOpHash)
    internal
    virtual
    override
    returns (uint256 validationData);
</code></pre>
<h3 id="_call"><a class="header" href="#_call">_call</a></h3>
<pre><code class="language-solidity">function _call(address target, uint256 value, bytes memory data) internal;
</code></pre>
<h3 id="getnonce"><a class="header" href="#getnonce">getNonce</a></h3>
<pre><code class="language-solidity">function getNonce() public view virtual override returns (uint256);
</code></pre>
<h3 id="getdeposit"><a class="header" href="#getdeposit">getDeposit</a></h3>
<p>check current account deposit in the entryPoint</p>
<pre><code class="language-solidity">function getDeposit() public view returns (uint256);
</code></pre>
<h3 id="adddeposit"><a class="header" href="#adddeposit">addDeposit</a></h3>
<p>deposit more funds for this account in the entryPoint</p>
<pre><code class="language-solidity">function addDeposit() public payable;
</code></pre>
<h3 id="withdrawdepositto"><a class="header" href="#withdrawdepositto">withdrawDepositTo</a></h3>
<p>withdraw value from the account's deposit</p>
<pre><code class="language-solidity">function withdrawDepositTo(address payable withdrawAddress, uint256 amount) public;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>withdrawAddress</code></td><td><code>address payable</code></td><td>target to send to</td></tr>
<tr><td><code>amount</code></td><td><code>uint256</code></td><td>to withdraw</td></tr>
</tbody></table>
</div>
<h3 id="_authorizeupgrade"><a class="header" href="#_authorizeupgrade">_authorizeUpgrade</a></h3>
<pre><code class="language-solidity">function _authorizeUpgrade(address newImplementation) internal view override;
</code></pre>
<h2 id="events-2"><a class="header" href="#events-2">Events</a></h2>
<h3 id="simpleaccountinitialized"><a class="header" href="#simpleaccountinitialized">SimpleAccountInitialized</a></h3>
<pre><code class="language-solidity">event SimpleAccountInitialized(IEntryPoint indexed entryPoint, string indexed ownerId);
</code></pre>
<h3 id="logstring"><a class="header" href="#logstring">LogString</a></h3>
<pre><code class="language-solidity">event LogString(string info);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="sigmawalletfactory"><a class="header" href="#sigmawalletfactory">SigmaWalletFactory</a></h1>
<p><a href="https://github.com/threesigmaxyz/sigma-wallet/blob/3363cbcbb9ec35ffd93a6f30954ff418e0bbb54b/src/SigmaWalletFactory.sol">Git Source</a></p>
<p>A sample factory contract for SimpleAccount
A UserOperations &quot;initCode&quot; holds the address of the factory, and a method call (to createAccount, in this sample factory).
The factory's createAccount returns the target account address even if it is already installed.
This way, the entryPoint.getSenderAddress() can be called either before or after the account is created.</p>
<h2 id="state-variables-7"><a class="header" href="#state-variables-7">State Variables</a></h2>
<h3 id="accountimplementation"><a class="header" href="#accountimplementation">accountImplementation</a></h3>
<pre><code class="language-solidity">SigmaWallet public immutable accountImplementation;
</code></pre>
<h2 id="functions-12"><a class="header" href="#functions-12">Functions</a></h2>
<h3 id="constructor-4"><a class="header" href="#constructor-4">constructor</a></h3>
<pre><code class="language-solidity">constructor(IEntryPoint _entryPoint, IProviderManager providerManager_);
</code></pre>
<h3 id="createaccount"><a class="header" href="#createaccount">createAccount</a></h3>
<p>create an account, and return its address.
returns the address even if the account is already deployed.
Note that during UserOperation execution, this method is called only if the account is not deployed.
This method returns an existing account address so that entryPoint.getSenderAddress() would work even after account creation</p>
<pre><code class="language-solidity">function createAccount(string memory ownerId, uint256 salt) public returns (SigmaWallet ret);
</code></pre>
<h3 id="getaddress"><a class="header" href="#getaddress">getAddress</a></h3>
<p>calculate the counterfactual address of this account as it would be returned by createAccount()</p>
<pre><code class="language-solidity">function getAddress(string memory ownerId, uint256 salt) public view returns (address);
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->
        <script src="solidity.min.js"></script>

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
